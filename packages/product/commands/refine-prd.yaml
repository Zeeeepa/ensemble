metadata:
  name: refine-prd
  description: Refine and enhance existing PRD with stakeholder feedback and additional detail
  version: 1.0.0
  lastUpdated: "2025-10-13"
  category: planning
  output_path: ensemble/refine-prd.md
  source: fortium

constraints:
  - DO NOT implement, build, or execute any work described in the PRD
  - This command ONLY refines the PRD document itself
  - The arguments describe what should be improved in the document, not what should be built
  - After refining the PRD, stop and wait for user approval before any implementation

mission:
  summary: |
    Refine and enhance an existing Product Requirements Document based on stakeholder
    feedback, additional research, or identified gaps. Updates PRD while maintaining
    version history and traceability.

workflow:
  phases:
    - name: PRD Review
      order: 1
      steps:
        - order: 1
          title: Current PRD Analysis
          description: Review existing PRD content

        - order: 2
          title: Interview users
          description: |
            REQUIRED: Conduct user interview BEFORE making any changes.
            Present identified gaps and ask clarifying questions:
            - Are there any requirements that are unclear or need more detail?
            - Are there missing user scenarios we should address?
            - Are the acceptance criteria complete and testable?
            - Is the scope correctly defined (in-scope vs out-of-scope)?
            - Are there any technical constraints or dependencies not captured?
            - What is the priority order of the features/requirements?
            - Are there any open questions or decisions that need resolution?

        - order: 3
          title: Feedback Integration
          description: Incorporate stakeholder feedback

    - name: Enhancement
      order: 2
      steps:
        - order: 1
          title: Content Refinement
          description: Enhance clarity, detail, and completeness

        - order: 2
          title: Validation
          description: Ensure all sections meet quality standards

    - name: Output Management
      order: 3
      steps:
        - order: 1
          title: PRD Update
          description: Update PRD with version history

expectedOutput:
  format: Refined Product Requirements Document (PRD)
  structure:
    - name: Updated PRD
      description: Enhanced PRD with feedback incorporated

    - name: Version History
      description: Changelog of updates and refinements
